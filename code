#include <iostream>
#include <string>
#include <vector>

using namespace std;

// 訂單類別
class Order {
public:
    string orderId;
    string customer;
    string address;
    string status;
    string courierName;

    Order(string id, string c, string a) {
        orderId = id;
        customer = c;
        address = a;
        status = "待配送";
        courierName = "未指派";
    }

    void assignCourier(string name) {
        courierName = name;
        status = "配送中";
    }
};

// 配送員類別
class Courier {
public:
    string courierId;
    string name;

    Courier(string id, string n) {
        courierId = id;
        name = n;
    }
};

// 系統管理類別
class LogisticsSystem {
private:
    vector<Order> orders;
    vector<Courier> couriers;

public:
    void addOrder() {
        string id, customer, address;
        cout << "輸入訂單編號：";
        cin >> id;
        cin.ignore();
        cout << "輸入客戶名稱：";
        getline(cin, customer);
        cout << "輸入配送地址：";
        getline(cin, address);

        orders.push_back(Order(id, customer, address));
        cout << "訂單新增成功\n";
    }

    void addCourier() {
        string id, name;
        cout << "輸入配送員編號：";
        cin >> id;
        cout << "輸入配送員姓名：";
        cin >> name;

        couriers.push_back(Courier(id, name));
        cout << "配送員新增成功\n";
    }

    void assignOrder() {
        string orderId, courierId;
        cout << "輸入訂單編號：";
        cin >> orderId;
        cout << "輸入配送員編號：";
        cin >> courierId;

        for (auto& o : orders) {
            if (o.orderId == orderId) {
                for (auto& c : couriers) {
                    if (c.courierId == courierId) {
                        o.assignCourier(c.name);
                        cout << "訂單已指派給 " << c.name << "\n";
                        return;
                    }
                }
            }
        }
        cout << "找不到訂單或配送員\n";
    }

    void showOrders() {
        cout << "\n--- 訂單列表 ---\n";
        for (auto& o : orders) {
            cout << "訂單：" << o.orderId
                << " | 客戶：" << o.customer
                << " | 狀態：" << o.status
                << " | 配送員：" << o.courierName << endl;
        }
    }
};

int main() {
    LogisticsSystem system;
    int choice;

    while (true) {
        cout << "\n物流配送管理系統\n";
        cout << "1. 新增訂單\n";
        cout << "2. 新增配送員\n";
        cout << "3. 指派訂單\n";
        cout << "4. 顯示訂單\n";
        cout << "0. 離開\n";
        cout << "選擇功能：";
        cin >> choice;

        switch (choice) {
        case 1:
            system.addOrder();
            break;
        case 2:
            system.addCourier();
            break;
        case 3:
            system.assignOrder();
            break;
        case 4:
            system.showOrders();
            break;
        case 0:
            return 0;
        default:
            cout << "無效選項\n";
        }
    }
}
